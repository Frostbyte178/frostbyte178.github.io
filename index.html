<!doctype html>
<html lang="en">

<head>
    <title>FTD Lasers</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700">
    <link rel="stylesheet" href="main.css" />
</head>

<body>
    <div class="simulationWrapper">
        <canvas id="simulationCanvas"></canvas>
    </div>
    <div class="mainWrapper">
        <span class="infoButtonWrapper">
            <span style="font-size:30px;cursor:pointer" onclick="toggleInfo()" id="infoButton"></span>
        </span>
        <span class="configButtonWrapper">
            <span style="font-size:30px;cursor:pointer" onclick="toggleConfig()" id="configButton"></span>
        </span>
        <span class="balancingButtonWrapper">
            <span style="font-size:30px;cursor:pointer" onclick="toggleBalancing()" id="balancingButton"></span>
        </span>
        <div id="title">
            <h1>Laser Beam Widening Testing</h1>
        </div>
        <div id="infoWrapper" class="info">
            <h1>Welcome!</h1>
            <h3>This site simulates a balancing change proposed to increase the effectiveness of 0q, 2q, 3q, and 4q lasers while disincentivizing long-range sniping.</h3>
            <h3>The change revolves around making laser beams deal damage in cones instead of in rays, details below and in the balancing sidebar two tabs below.</h3>
            <h3>Click on the simulation to fire the modified laser, shift click to fire the in-game version of lasers.</h3>
            <h3>Adjust the configuration of the lasers and the armor in the config menu via the gear icon beneath this tab. The values provided are merely for demonstration and you are welcome to fine-tune them to your liking.</h3><br>
            <h2>Beam Expansion</h2>
            <h3>Laser beams expand to deal damage in a cone, with the tip placed at the end of the optics. The radius of the cone depends on the damage of the shot.</h3>
            <h3>In the 2-dimensional case, expansion is measured in damage per meter of expansion per 100m range. If the config value is set to 1000, then a 1000 damage shot will expand to a radius of 1m at 100m, 2m at 200m, etc.</h3>
            <h3>The expansion for three dimensions would instead be measured in damage per meters squared per 100m range to maintain a linearly increasing area instead of a linearly increasing radius, as the intent is to spread damage across a linearly increasing number of blocks.</h3>
        </div>
        <div id="configWrapper" class="config">
            <h1>Config Menu</h1>
            <h2>Testing Setup</h2>
            
            <div class="inputConfig">
                <label for="configRange">Range</label>
                <input id="configRange" type="number" value="1000" min=0 max="10000" step="100">

                <label for="configDps">DPS*</label>
                <input id="configDps" type="number" value="25000" min="0" step="1000">

                <label for="configIntensity">Intensity</label>
                <input id="configIntensity" type="number" value="60" min="40">

                <label for="configAttenuation">Attenuation (%)</label>
                <input id="configAttenuation" type="number" value="1" min="0" step="0.02">

                <label for="configStability">Stability</label>
                <input id="configStability" type="number" value="100" min="0" max="100" step="5">

                <label for="configQ" id="qLabel">Q Count: 0</label>
                <input type="range" min="0" max="4" value="1" class="slider" id="configQ">

                <label for="configArmor">Armor Type</label>
                <select id="configArmor">
                    <option value="wood">Wood</option>
                    <option value="stone">Stone</option>
                    <option value="alloy">Alloy</option>
                    <option value="metal" selected="selected">Metal</option>
                    <option value="heavy">Heavy Armor</option>
                </select>

                <label for="configThickness">Armor Thickness</label>
                <input id="configThickness" type="number" value="25" min="1" max="50">
            </div>
            <h3>*For burst lasers, set the DPS to the single shot damage and select 1Q.</h3><br>

            <h2>New Laser Stats</h2>
            <h3>Only applies to the new lasers with beam widening.</h3>
            <div class="inputConfig2">
                <label for="configInaccuracy">Inaccuracy</label>
                <input id="configInaccuracy" type="number" value="0.05" min="0" step="0.01">

                <label for="configExpansion">Expansion*</label>
                <input id="configExpansion" type="number" value="500000" min=0 step="1000">
            </div>
            <h3>*See info tab for details. Change freely according to your testing data.</h3><br>

            <h2>Reset Armor</h2>
            <button type="button" id="resetArmor">Reset</button>
        </div>
        <div id="balancingWrapper" class="balancing">
            <h1>Balancing</h1>
            <h3>This implementation of beam expansion effectively sets a hard limit on how far a laser beam can penetrate into armor, as any increase in damage is spread across the same increase in surface area.</h3>
            <h3>If you wish to penetrate further, approach the enemy to reduce the expansion or use a higher Q count (at the expense of requiring more shots if inaccuracy is a factor).</h3>
            <h3>This can be changed as necessary, as tweaking the expansion formula is rather easy and many options exist. A more linear one would mean more incentive to get closer and targeting of specific damage values for maximum pen, an even flatter one would allow shots to pen further with more raw damage.</h3>
            <h3>To avoid outright buffing heavy armor spam, the base damage of lasers can (and should) be increased as necessary. This also makes lasers more viable against things that are not flying.</h3>
            <h3>To preserve the viability of planes, beam spread would not be customizable, or it would be severely restricted to a small range, so flashlight lasers can't exist where they blast a huge hole in the sky.</h3><br>
            <h2>Non-1q Buffs As Necessary</h2>
            <h3>Decrease inaccuracy based on RPM, so non-1q lasers are more capable of drilling through armor in multiple shots. 0q would have the least inaccuracy, then 4q, then 3q, etc.</h3>
            <h3>Adjust base stats so higher Q counts are slightly less efficient but also have inherently more base damage per shot. 1q would be less than 8x as strong per shot as 4q, etc. This brings the extremes of damage profiles closer to the middle, avoiding forced Q count choices for different roles.</h3>
        </div>
    </div>
    <!-- JS -->
    <script src="app.js"></script>
    <script>
        // Toggling the info side panel
        let infoOpen = false;
        function toggleInfo() {
            infoOpen = !infoOpen;
            document.getElementById("infoWrapper").style.width = infoOpen ? "350px" : "0px";
            document.getElementById("infoButton").style.right = infoOpen ? "350px" : "0px";
        }

        // Toggling the configuration side panel
        let configOpen = false;
        function toggleConfig() {
            configOpen = !configOpen;
            document.getElementById("configWrapper").style.width = configOpen ? "300px" : "0px";
            document.getElementById("configButton").style.right = configOpen ? "300px" : "0px";
        }

        // Toggling the balancing side panel
        let balancingOpen = false;
        function toggleBalancing() {
            balancingOpen = !balancingOpen;
            document.getElementById("balancingWrapper").style.width = balancingOpen ? "300px" : "0px";
            document.getElementById("balancingButton").style.right = balancingOpen ? "300px" : "0px";
        }
    </script>
</body>

</html>